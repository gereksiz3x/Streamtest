name: Basit Stream Collector

on:
  schedule:
    - cron: '0 */8 * * *'  # Her 8 saatte
  workflow_dispatch:        # Manuel Ã§alÄ±ÅŸtÄ±r

jobs:
  collect:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v4
      
    - name: Python kur
      uses: actions/setup-python@v5
      with:
        python-version: '3.10'
        
    - name: KÃ¼tÃ¼phaneleri yÃ¼kle
      run: pip install requests
      
    - name: Scripti Ã§alÄ±ÅŸtÄ±r
      run: python collector.py
      
    - name: SonuÃ§larÄ± gÃ¶ster
      run: |
        echo "=== OLUÅžAN DOSYALAR ==="
        ls -la *.m3u
        echo "=== M3U Ä°Ã‡ERÄ°ÄžÄ° (ilk 10 satÄ±r) ==="
        head -15 streams.m3u 2>/dev/null || echo "Dosya yok"
        
    - name: GitHub'a kaydet
      run: |
        git config --global user.name 'GitHub Actions'
        git config --global user.email 'actions@github.com'
        git add streams.m3u
        if git diff --staged --quiet; then
          echo "DeÄŸiÅŸiklik yok"
        else
          git commit -m "ðŸ¤– GÃ¼ncel streamler: $(date +'%d.%m.%Y %H:%M')"
          git push
        fi
